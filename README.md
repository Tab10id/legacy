# Я люблю legacy

## что такое legacy

### код без тестов

### код с плохими тестами

### функциональность которая никому не нужна

### функциональность которая неизвестно кому нужна

- мониторинг

### просто плохой код

## тесты

### E2E

- все не покроете
- это единственный способ покрыть тестами legacy код

### Модульные

- В legacy невозможно найти что-либо что можно назвать модулем
- в процессе рефакторинга вычленяем модули и покрываем тестами

### ничего не проверяющие

### дублирующие друг друга

### непонятные

## как жить в legacy и как его побеждать

### роняйте прод

- невозможно не уронить
- рано или поздно он все равно упадет
- вероятность падения была заложена когда писался legacy код

### восстанавливайте требования

- wiki?
- тест план?

	- без понятия как его сделать для большого проекта и актуализировать
	- MindMap в проекте?

### не пишите legacy*

- прорабатывайте требования
- CodeReview

	- наличие тестов проверяется на CodeReview
	- CodeStyle
	- жесткое и честное

- статический анализ

	- прекоммит

- пишите legacy если вариантов нет

	- Поставьте задачу на исправление

### Пользуйтесь IDE

- выделение переменных
- выделение методов
- чистые функции

### SOLID

- отдельно про SRP
- отдельно про DI

### переписывайте то, что нельзя починить

- это дорого

## CI

### Тесты бесполезны пока нет CI

- Если у вас legacy, значит у вас много кода
- если много кода должно быть много тестов
- если много тестов, они долго гоняются
- если тесты долго гоняются разработчик не будет их запускать

### количество проваленых тестов равно нулю

### гоняйте тесты на хорошем железе

- мигающие тесты
- параллельный прогон

### статический анализ

- отчеты

## запретите push в master всем кроме CI

### Каждая задача отдельная ветка

### Каждый коммит делает только одну вещь*

- CodeStyle на текст коммита

	- зачем, а не что
	- короткий заголовок
	- ссылка на задачу в заголовке

## CD

### Ронять прод не так страшно, так как при частых релизах понять что пошло не так значительно проще

### проще понять когда нужен хотфикс, а когда нужен откат

### проще откат

### не ковыряйтесь на проде*

### это дорого

## Почему я люблю legacy

### Помогает развиваться в качестве разработчика

### Позволяет развиваться в качестве аналитика

### Помогает развиваться в качестве тестировщика

### Это весело
